apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-stream-conf
data:
  nginx.conf: |
    worker_processes auto;

    events {
      worker_connections 1024;
    }

    stream {
      resolver kube-dns.kube-system.svc.cluster.local valid=10s;

      upstream cliente-945b3565-manoel {
        server minecraft-cliente-945b3565-manoel.minecraft.svc.cluster.local:30500;
      }

      server {
        listen 30500;
        proxy_pass cliente-945b3565-manoel;
      }
    }
